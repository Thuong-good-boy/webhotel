<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phòng - Hotel Family</title>
  <link rel="stylesheet" href="pages.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    /* CSS cho modal đặt phòng */
    .modal {
      display: none; /* Ẩn mặc định */
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
    }
    .modal-content {
      background-color: #fff;
      margin: 10% auto;
      padding: 20px;
      border-radius: 8px;
      width: 90%;
      max-width: 500px;
      position: relative;
      animation: fadeIn 0.5s;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      font-weight: bold;
      color: #555;
      cursor: pointer;
    }
    .modal-content h3 {
      margin-bottom: 20px;
      text-align: center;
    }
    .booking-form-modal input,
    .booking-form-modal textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 16px;
    }
    .booking-form-modal button {
      width: 100%;
      padding: 12px;
      background-color: #0d6efd;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .booking-form-modal button:hover {
      background-color: #084298;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    #savedRoomsBtn {
   position: fixed;
   top: 100px;
   right: 20px;
   z-index: 1000;
   padding: 10px 20px;
   background-color: #4facfe;
   color: white;
   border: none;
   border-radius: 25px;
   font-weight: bold;
   cursor: pointer;
   box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
   transition: background 0.3s, transform 0.2s;
   }

   #savedRoomsBtn:hover {
   background-color: #43e97b;
   transform: scale(1.05);
   }
   .hero-content{
   width: 70%;
  margin: 30px auto;
   }
   .search-form form {
  width: 70%;
  max-width: 700px;
  margin: 30px auto;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}


.search-form input,
.search-form button {
  padding: 10px 15px;
  border: none;
  border-radius: 5px;
  font-size: 16px;
}

.search-form input {
  flex: 1;
  min-width: 150px;
}

.search-form button {
  background-color: #ffc107;
  color: #000;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.search-form button:hover {
  background-color: #e0a800;
}


  </style>
</head>
<body>
  <!-- Header (giữ nguyên phần header chung) -->
 
  <header class="header">
    <div class="container">
      <div class="logo"><a href="index.html">Hotel Family</a></div>
      <nav class="nav">
        <ul class="nav-links">
          <li><a href="phong.html" class="active">Phòng</a></li>
          <li><a href="combo.html">Combo Du Lịch</a></li>
          <li><a href="khuyenmai.html">Khuyến Mãi</a></li>
          <li><a href="hotro.html">Hỗ Trợ</a></li>
        </ul>
      </nav>
      <div class="auth-buttons">
         <a href="login.html">Đăng nhập</a> <a href="register.html">Đăng ký</a>
      </div>
    </div>
    <button id="savedRoomsBtn">Phòng đã đặt</button>
  </header>

  <!-- Hero Section nhỏ cho trang Phòng -->
  <section class="hero-small" style="background: url('https://i.pinimg.com/736x/82/12/9d/82129df28eab198930dd2111a92e1073.jpg') no-repeat center center/cover;">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h2>Khám phá phòng nghỉ đẳng cấp</h2>
      <p>Trải nghiệm không gian nghỉ dưỡng sang trọng cùng tiện nghi hiện đại</p>
      
    </div>
  </section>

  <!-- Nội dung trang: danh sách các loại phòng -->
  <div class="search-form">
   <section class="hero">
      <div class="hero-content">
        <h2>Tìm kiếm Phòng hoàn hảo cho chuyến đi của bạn</h2>
        <p>Khám phá những địa điểm nghỉ dưỡng tuyệt vời và ưu đãi hấp dẫn</p>
        <div class="search-form">
          <form>
            <input type="text" placeholder="Địa điểm">
            <input type="date" placeholder="Nhận phòng">
            <input type="date" placeholder="Trả phòng">
            <input type="number" placeholder="Số khách">
            <button type="submit">Tìm kiếm</button>
          </form>
        </div>
      </div>
    </section>
 </div>
</div>
  <main class="content">
    <section class="cards-section">
      <h3>Các loại phòng</h3>
      <div class="card-grid">
        <!-- Card Phòng Deluxe -->
        <div class="card">
          <img src="https://cdn-www.vinid.net/186cf1c7-khach-san-song-han-da-nang-1.jpg" alt="Phòng Deluxe">
          <div class="card-info">
            <h4>View nhìn ra sông hàn</h4>
            <p>Phòng rộng rãi với view tuyệt đẹp và thiết kế hiện đại.</p>
            <p class="idgia">Giá : 3.000.000VNĐ</p>
            <button class="book-btn" data-room="Phòng View nhìn ra sông hàn">Đặt phòng</button>
          </div>
        </div>
        <!-- Card Phòng Suite -->
        <div class="card">
          <img src="https://source.unsplash.com/400x300/?luxury,room" alt="Phòng Suite">
          <div class="card-info">
            <h4>Phòng Suite</h4>
            <p>Phòng hạng sang, đầy đủ tiện nghi và dịch vụ đẳng cấp.</p>
            <button class="book-btn" data-room="Phòng Suite">Đặt phòng</button>
          </div>
        </div>
        <!-- Card Phòng Standard -->
        <div class="card">
          <img src="https://source.unsplash.com/400x300/?hotel,lobby" alt="Phòng Standard">
          <div class="card-info">
            <h4>Phòng Standard</h4>
            <p>Phòng tiết kiệm nhưng vẫn đảm bảo thoải mái và tiện nghi.</p>
            <button class="book-btn" data-room="Phòng Standard">Đặt phòng</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal đặt phòng -->
  <div id="bookingModal" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <h3>Đặt Phòng: <span id="modal-room-name"></span></h3>
      <form class="booking-form-modal" id="booking-form-modal">
        <input type="date" id="checkin" required placeholder="Ngày nhận phòng">
        <input type="date" id="checkout" required placeholder="Ngày trả phòng">
        <input type="number" id="guests" placeholder="Số khách" required min="1">
        <input type="text" id="customer-name" placeholder="Họ và tên" required>
        <input type="tel" id="customer-phone" placeholder="Số điện thoại" required>
        <input type="email" id="customer-email" placeholder="Email" required>
        <textarea id="special-request" rows="3" placeholder="Yêu cầu đặc biệt (nếu có)"></textarea>
        <button id="confirmBookingBtn" type="submit">Xác nhận đặt phòng</button>
      </form>
    </div>
  </div>

  <script >
   document.addEventListener('DOMContentLoaded', function() {
   if(currentUser) {    
         // Ẩn đăng nhập/đăng ký
    if (loginBtn) loginBtn.style.display = "none";
    if (registerBtn) registerBtn.style.display = "none";

    // Hiện tên người dùng
    if (userNameDisplay) {
      userNameDisplay.textContent = "Xin chào, " + currentUser.fullname;
      userNameDisplay.style.display = "inline-block";
    }
  } else {
    // Nếu chưa đăng nhập, ẩn tên và nút đăng xuất
    if (userNameDisplay) userNameDisplay.style.display = "none";
    if (logoutBtn) logoutBtn.style.display = "none";
    authSection.innerHTML = '<a href="login.html">Đăng nhập</a> <a href="register.html">Đăng ký</a>';
  }
      let authSection = document.querySelector('.auth-buttons');
      // Kiểm tra thông tin đăng nhập hiện tại
      let currentUser = localStorage.getItem('currentUser');
        currentUser = JSON.parse(currentUser);
        authSection.innerHTML = '<a href="account.html" class="user-link">' + currentUser.fullname + '</a>';
      
    });
    // Xử lý hiển thị modal khi bấm nút "Đặt phòng"
    const bookButtons = document.querySelectorAll('.book-btn');
    const modal = document.getElementById('bookingModal');
    const modalRoomName = document.getElementById('modal-room-name');
    const modalClose = document.querySelector('.modal-close');

    bookButtons.forEach(btn => {
      btn.addEventListener('click', function() {
          // Kiểm tra xem người dùng đã đăng nhập hay chưa
          let currentUser = JSON.parse(localStorage.getItem("currentUser"));
         if (currentUser === null ) {
            alert("bạn cần đăng nhập để đặt phòng");
            window.location.href = "login.html";

         } 
        // Lấy tên phòng từ thuộc tính data-room
        const room = this.getAttribute('data-room');
        modalRoomName.textContent = room;
        modal.style.display = 'block';
      });
    });

    // Đóng modal khi bấm dấu X
    modalClose.addEventListener('click', function() {
      modal.style.display = 'none';
    });

    // Đóng modal khi click bên ngoài nội dung modal
    window.addEventListener('click', function(e) {
      if (e.target === modal) {
        modal.style.display = 'none';
      }
    });

    // Xử lý đặt phòng
    document.getElementById('booking-form-modal').addEventListener('submit', function(e) {
      
      e.preventDefault();
      // Lấy giá trị từ form
      const checkin = document.getElementById('checkin').value;
      const checkout = document.getElementById('checkout').value;
      const guests = document.getElementById('guests').value;
      const customerName = document.getElementById('customer-name').value;
      const customerPhone = document.getElementById('customer-phone').value;
      const customerEmail = document.getElementById('customer-email').value;
      const specialRequest = document.getElementById('special-request').value;
      const roomName = modalRoomName.textContent;

      // Ở đây, bạn có thể gửi dữ liệu đến backend qua fetch/axios
      // Ví dụ:
      /*
      fetch('/bookRoom', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          room: roomName,
          checkin: checkin,
          checkout: checkout,
          guests: guests,
          customerName: customerName,
          customerPhone: customerPhone,
          customerEmail: customerEmail,
          specialRequest: specialRequest
        })
      }).then(response => response.json())
        .then(data => { 
          alert(data.message); 
          modal.style.display = 'none';
        });
      */
      // Đối với demo, chỉ hiện alert và đóng modal:
      alert('Đặt phòng ' + roomName + ' thành công!\n' + 
            'Ngày nhận: ' + checkin + '\n' +
            'Ngày trả: ' + checkout + '\n' +
            'Số khách: ' + guests);
      modal.style.display = 'none';
      // Reset form
      e.target.reset();
    });
    // Bắt sự kiện khi bấm "Đặt phòng"
   document.querySelectorAll(".book-btn").forEach(button => {
   button.addEventListener("click", function () {
      const roomName = this.getAttribute("data-room");
      let savedRooms = JSON.parse(localStorage.getItem("savedRooms")) || [];
      savedRooms.push(roomName);
      localStorage.setItem("savedRooms", JSON.stringify(savedRooms));
   });
   });

// Bắt sự kiện khi bấm nút "Phòng đã đặt"
document.getElementById("savedRoomsBtn").addEventListener("click", function () {
  let savedRooms = JSON.parse(localStorage.getItem("savedRooms")) || [];
  if (savedRooms.length === 0) {
    alert("Bạn chưa đặt phòng nào.");
  } else {
    alert("Các phòng bạn đã đặt:\n- " + savedRooms.join("\n- "))  ;
  }
});
// để xóa dữ liệu do test quá nhiều 
// localStorage.removeItem("savedRooms")

  </script>
</body>
</html>
